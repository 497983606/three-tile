<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>three-tile</title><meta name="description" content="Documentation for three-tile"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">three-tile</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>three-tile</h2></div><div class="tsd-panel tsd-typography"><a id="md:three-tile-v06" class="tsd-anchor"></a><h1><a href="#md:three-tile-v06"><strong>three-tile V0.6</strong></a></h1><p align='right'>hz_gjf@163.com</p>

<a id="md:1-简介" class="tsd-anchor"></a><h2><a href="#md:1-简介">1 简介</a></h2><p>three-tile 是一个使用 <a href="https://threejs.org/">threejs</a>开发的轻量级三维瓦片地图库，具有使用简单、资源占用少等优点，适用于给基于 threejs 开发应用增加三维地图。</p>
<p>注意：这不是Cesium，也不是Mapbox-gl，跟这些三维GIS框架没有一毛钱关系！</p>
<p>Source: <a href="https://github.com/sxguojf/three-tile">https://github.com/sxguojf/three-tile</a></p>
<p>Examples: <a href="https://sxguojf.github.io/three-tile-example">https://sxguojf.github.io/three-tile-example</a></p>
<p>Examples Source： <a href="https://github.com/sxguojf/three-tile-example">https://github.com/sxguojf/three-tile-example</a></p>
<p><img src="images/image-3.png" alt="alt text"></p>
<p><img src="images/image-0.png" alt="alt text"></p>
<p><img src="images/image-2.png" alt="alt text"></p>
<p><img src="images/image-4.png" alt="alt text"></p>
<p><img src="images/image-1.png" alt="alt text"></p>
<p>免责声明：</p>
<ul>
<li>本框架不含任何地图数据，Example 中使用的地图均为直接调用第三方数据，使用中请遵循法律法规要求。</li>
</ul>
<a id="md:11-特点" class="tsd-anchor"></a><h3><a href="#md:11-特点">1.1 特点</a></h3><ul>
<li>轻量级：地图以一个三维模型方式提供，不会对已有程序架构产生任何影响。</li>
<li>依赖少：整个框架仅有 threejs（R165）一个依赖。</li>
<li>速度快：对资源占用做极致优化，核显也能轻松跑到 60FPS。</li>
<li>使用简单：熟悉 threejs 基本上没有学习成本。</li>
<li>扩展性强：数据、模型、纹理、材质、渲染过程均能根据自己需要扩展和替换。</li>
</ul>
<a id="md:12-开发环境" class="tsd-anchor"></a><h3><a href="#md:12-开发环境">1.2 开发环境</a></h3><ul>
<li>语言：TypeScript 100%</li>
<li>IDE： VSCode</li>
<li>打包：Vite 4.0</li>
<li>依赖：three 0.165</li>
</ul>
<hr>
<a id="md:2-安装" class="tsd-anchor"></a><h2><a href="#md:2-安装">2 安装</a></h2><a id="md:21-直接引用" class="tsd-anchor"></a><h3><a href="#md:21-直接引用">2.1 直接引用</a></h3><pre><code><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0"> </span><span class="hl-1">src</span><span class="hl-0">=</span><span class="hl-2">&quot;./three.js&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-3">script</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0"> </span><span class="hl-1">src</span><span class="hl-0">=</span><span class="hl-2">&quot;./three-tile.umd.js&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-3">script</span><span class="hl-0">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:22-npm" class="tsd-anchor"></a><h3><a href="#md:22-npm">2.2 npm</a></h3><pre><code class="language-sh"><span class="hl-4">npm</span><span class="hl-0"> </span><span class="hl-2">i</span><span class="hl-0"> </span><span class="hl-2">three-tile</span><span class="hl-0"> </span><span class="hl-5">-S</span>
</code><button>Copy</button></pre>
<pre><code class="language-sh"><span class="hl-4">yarn</span><span class="hl-0"> </span><span class="hl-2">add</span><span class="hl-0"> </span><span class="hl-2">three-tile</span><span class="hl-0"> </span><span class="hl-5">-S</span>
</code><button>Copy</button></pre>
<hr>
<a id="md:3-使用" class="tsd-anchor"></a><h2><a href="#md:3-使用">3 使用</a></h2><p>和一般 threejs 应用一样，初始化 threejs 三维场景后，将地图模型加入场景即可完成地图的显示。</p>
<p>使用按以下步骤：</p>
<ol>
<li>初始化三维场景</li>
<li>定义地图数据源</li>
<li>创建地图模型</li>
<li>地图模型加入三维场景</li>
</ol>
<a id="md:31-初始化三维场景" class="tsd-anchor"></a><h3><a href="#md:31-初始化三维场景">3.1 初始化三维场景</a></h3><p>three-tile 的三维场景初始化和 threejs 相同，按 threejs 的套路初始化场景、摄像机、控制器、灯光等即可。为了便于使用，three-tile 还提供一个 GLViewer 类，它封装了场景初始化过程，可直接使用它进行初始化。</p>
<pre><code class="language-typescript"><span class="hl-6">import</span><span class="hl-0"> </span><span class="hl-5">*</span><span class="hl-0"> </span><span class="hl-6">as</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0"> </span><span class="hl-6">from</span><span class="hl-0"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// 取得地图dom</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">glContainer</span><span class="hl-0"> = </span><span class="hl-1">document</span><span class="hl-0">.</span><span class="hl-4">querySelector</span><span class="hl-0">&lt;</span><span class="hl-3">HTMLElement</span><span class="hl-0">&gt;(</span><span class="hl-2">&quot;#map&quot;</span><span class="hl-0">);</span><br/><span class="hl-7">// 初始化三维场景(调用three-tile内置的初始化类)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">viewer</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">GLViewer</span><span class="hl-0">(</span><span class="hl-1">glContainer</span><span class="hl-0">!);</span>
</code><button>Copy</button></pre>
<p>如果你熟悉 threejs，场景初始化最好自己写，跟普通 threejs 程序并无太大差异。以下部分需要注意：</p>
<ul>
<li>为了使地图坐标系与一般人类理解一致，three-tile 地图坐标方向采用东(x)北(y)上(z)方向，即地面在 x-y 平面上，海拔高度在 z 轴。而 threejs 一般平面在 xz 平面上，高度为 y 轴，所以初始化时需要使场景默认 up 指向 z 轴，可添加：Object3D.DEFAULT_UP.set(0, 0, 1) 即可。如果你的应用不能调整 up 值，可以将地图旋转-π/2° 完成。（一些朋友表示不适应，后期可能根据反馈调整）</li>
<li>地图添加光照才能显示。一般至少要有一个环境光，另外最好加一个直射光以通过地形法向量增强凹凸感。</li>
<li>场景控制器一般应用可使用 threejs 内置的 MapControls，其它控制器如 OrbitControls、FlyControls、PointerLockControls、TransformControls、FirstPersonControls 都能完美支持。</li>
</ul>
<a id="md:32-定义地图数据源" class="tsd-anchor"></a><h3><a href="#md:32-定义地图数据源">3.2 定义地图数据源</a></h3><p>three-tile 内置了 Mapbox、ArcGis、Bing、天地图、高德、腾讯等多个厂商的瓦片地图源，可直接调用，也可根据根据需要自行扩展。地图切片默认使用 Google 方案，地形瓦片支持 MapBox 的 terrain-rgb 和 ArcGis 的 LERC 格式。如 MapBox 数据源创建如下：</p>
<pre><code class="language-typescript"><span class="hl-6">import</span><span class="hl-0"> </span><span class="hl-5">*</span><span class="hl-0"> </span><span class="hl-6">as</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0"> </span><span class="hl-6">from</span><span class="hl-0"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// MapBoxToken 请更换为你自己申请的key</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-0"> = </span><span class="hl-2">&quot;xxxxxxxxxx&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// mapbox 影像数据源</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">mapBoxImgSource</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">MapBoxSource</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-1">token:</span><span class="hl-0"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">dataType:</span><span class="hl-0"> </span><span class="hl-2">&quot;image&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">style:</span><span class="hl-0"> </span><span class="hl-2">&quot;mapbox.satellite&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// mapbox 地形数据源</span><br/><span class="hl-6">export</span><span class="hl-0"> </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">mapBoxDemSource</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">MapBoxSource</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-1">token:</span><span class="hl-0"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">dataType:</span><span class="hl-0"> </span><span class="hl-2">&quot;terrain-rgb&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">style:</span><span class="hl-0"> </span><span class="hl-2">&quot;mapbox.terrain-rgb&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">maxLevel:</span><span class="hl-0"> </span><span class="hl-9">15</span><span class="hl-0">,</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<p><strong>注意：</strong></p>
<ol>
<li>多数数据源需要申请 token 才能使用，请不要用我示例中的。</li>
<li>部分国外的地图无法访问，或是速度很慢，这个需要自己想办法，你们懂的。</li>
<li>国内地图使用“火星坐标系”，影像图与地形有可能无法套准。</li>
<li>地图数据使用，请遵循法律法规要求。</li>
</ol>
<a id="md:32-地图创建" class="tsd-anchor"></a><h3><a href="#md:32-地图创建">3.2 地图创建</a></h3><p>使用 TileMap 类的工厂方法 create() 创建地图，加入场景。</p>
<pre><code class="language-typescript"><span class="hl-6">import</span><span class="hl-0"> </span><span class="hl-5">*</span><span class="hl-0"> </span><span class="hl-6">as</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0"> </span><span class="hl-6">from</span><span class="hl-0"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// 创建地图</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">map</span><span class="hl-0"> = </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">TileMap</span><span class="hl-0">.</span><span class="hl-4">create</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-7">// 影像数据源</span><br/><span class="hl-0">    </span><span class="hl-1">imgSource:</span><span class="hl-0"> </span><span class="hl-1">mapBoxImgSource</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 地形数据源</span><br/><span class="hl-0">    </span><span class="hl-1">demSource:</span><span class="hl-0"> </span><span class="hl-1">mapBoxDemSource</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 地图投影中央子午线经度</span><br/><span class="hl-0">    </span><span class="hl-1">lon0:</span><span class="hl-0"> </span><span class="hl-9">90</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 最小缩放级别</span><br/><span class="hl-0">    </span><span class="hl-1">minLevel:</span><span class="hl-0"> </span><span class="hl-9">2</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 最大缩放级别</span><br/><span class="hl-0">    </span><span class="hl-1">maxLevel:</span><span class="hl-0"> </span><span class="hl-9">18</span><span class="hl-0">,</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// 将地图加入三维场景</span><br/><span class="hl-1">viewer</span><span class="hl-0">.</span><span class="hl-1">scene</span><span class="hl-0">.</span><span class="hl-4">add</span><span class="hl-0">(</span><span class="hl-1">map</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<p>也可调用 TileMap 的构造函数创建地图。</p>
<a id="md:4-约定和限制" class="tsd-anchor"></a><h2><a href="#md:4-约定和限制">4. 约定和限制</a></h2><ul>
<li>坐标轴：地图模型为东北上坐标系，即 X 轴指向东，Y 轴指向北，Z 轴指向上。与 threejs 默认坐标不同需要注意。</li>
<li>坐标单位：角度单位为弧度，经纬度为度，3857 投影（默认）距离单位为公里，4326 投影距离单位为 0.01 度，高度单位均为公里。</li>
<li>瓦片数据：内建的地图影像和地形数据均使用图片格式（jpg、png、webp 等），支持 3854 和 4326 投影，暂不支持矢量瓦片。</li>
<li>瓦片属性：默认情况瓦片模型纹理透明属性开启，请注意渲染顺序。</li>
<li>地图清晰度：清晰度与本框架无关，取决数据源精度。</li>
<li>地图标注源：大部分国内厂商地图数据的地名、边界、道路有一定偏移，与地形无法完全匹配。</li>
<li>地图 token：大部分厂商的地图数据需要申请开发 key 才能使用，three-tile 示例包含一些厂商的 token，访问的人多了厂商会封掉它们，使用者一定要自己申请（又不要钱）避免直接使用。</li>
</ul>
<p>更多使用方法见 example</p>
<a id="md:5-示例" class="tsd-anchor"></a><h2><a href="#md:5-示例">5. 示例</a></h2><p>提供一个完整浏览器引入方式示例供测试，可不用 web 服务直接在文件系统下运行：</p>
<pre><code class="language-html"><span class="hl-10">&lt;!</span><span class="hl-11">DOCTYPE</span><span class="hl-0"> </span><span class="hl-12">html</span><span class="hl-10">&gt;</span><br/><span class="hl-10">&lt;</span><span class="hl-11">html</span><span class="hl-0"> </span><span class="hl-12">lang</span><span class="hl-0">=</span><span class="hl-13">&quot;zh-cn&quot;</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">head</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">meta</span><span class="hl-0"> </span><span class="hl-12">charset</span><span class="hl-0">=</span><span class="hl-13">&quot;utf-8&quot;</span><span class="hl-0"> </span><span class="hl-10">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">meta</span><br/><span class="hl-0">            </span><span class="hl-12">name</span><span class="hl-0">=</span><span class="hl-13">&quot;viewport&quot;</span><br/><span class="hl-0">            </span><span class="hl-12">content</span><span class="hl-0">=</span><span class="hl-13">&quot;width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&quot;</span><br/><span class="hl-0">        </span><span class="hl-10">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">title</span><span class="hl-10">&gt;</span><span class="hl-0">three-tile</span><span class="hl-10">&lt;/</span><span class="hl-11">title</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;/</span><span class="hl-11">head</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">style</span><span class="hl-10">&gt;</span><br/><span class="hl-14">        </span><span class="hl-15">html</span><span class="hl-14">,</span><br/><span class="hl-14">        </span><span class="hl-15">body</span><span class="hl-14"> {</span><br/><span class="hl-14">            </span><span class="hl-12">background-color</span><span class="hl-14">: </span><span class="hl-16">#333</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">height</span><span class="hl-14">: </span><span class="hl-9">100%</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">width</span><span class="hl-14">: </span><span class="hl-9">100%</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">padding</span><span class="hl-14">: </span><span class="hl-9">0</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">margin</span><span class="hl-14">: </span><span class="hl-9">0</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">display</span><span class="hl-14">: </span><span class="hl-16">flex</span><span class="hl-14">;</span><br/><span class="hl-14">        }</span><br/><span class="hl-14">        </span><span class="hl-15">#map</span><span class="hl-14"> {</span><br/><span class="hl-14">            </span><span class="hl-12">flex</span><span class="hl-14">: </span><span class="hl-9">1</span><span class="hl-14">;</span><br/><span class="hl-14">        }</span><br/><span class="hl-14">    </span><span class="hl-10">&lt;/</span><span class="hl-11">style</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">body</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">div</span><span class="hl-0"> </span><span class="hl-12">id</span><span class="hl-0">=</span><span class="hl-13">&quot;map&quot;</span><span class="hl-10">&gt;&lt;/</span><span class="hl-11">div</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">script</span><span class="hl-14"> </span><span class="hl-12">src</span><span class="hl-14">=</span><span class="hl-13">&quot;./three.js&quot;</span><span class="hl-10">&gt;&lt;/</span><span class="hl-11">script</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">script</span><span class="hl-14"> </span><span class="hl-12">src</span><span class="hl-14">=</span><span class="hl-13">&quot;./three-tile/three-tile.umd.cjs&quot;</span><span class="hl-10">&gt;&lt;/</span><span class="hl-11">script</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">script</span><span class="hl-10">&gt;</span><br/><span class="hl-14">            </span><span class="hl-1">console</span><span class="hl-14">.</span><span class="hl-4">log</span><span class="hl-14">(</span><span class="hl-2">&quot;three-tile start!&quot;</span><span class="hl-14">);</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// MapBoxToken 请更换为你自己申请的key</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-2">&quot;xxxxxxxxxx&quot;</span><span class="hl-14">;</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// mapbox影像数据源</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">mapBoxImgSource</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">plugin</span><span class="hl-14">.</span><span class="hl-4">MapBoxSource</span><span class="hl-14">({</span><br/><span class="hl-14">                </span><span class="hl-1">token:</span><span class="hl-14"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">dataType:</span><span class="hl-14"> </span><span class="hl-2">&quot;image&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">style:</span><span class="hl-14"> </span><span class="hl-2">&quot;mapbox.satellite&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">            });</span><br/><span class="hl-14">            </span><span class="hl-7">// mapbox地形数据源</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">mapBoxDemSource</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">plugin</span><span class="hl-14">.</span><span class="hl-4">MapBoxSource</span><span class="hl-14">({</span><br/><span class="hl-14">                </span><span class="hl-1">token:</span><span class="hl-14"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">dataType:</span><span class="hl-14"> </span><span class="hl-2">&quot;terrain-rgb&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">style:</span><span class="hl-14"> </span><span class="hl-2">&quot;mapbox.terrain-rgb&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">maxLevel:</span><span class="hl-14"> </span><span class="hl-9">15</span><span class="hl-14">,</span><br/><span class="hl-14">            });</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// 创建地图</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">map</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">TileMap</span><span class="hl-14">.</span><span class="hl-4">create</span><span class="hl-14">({</span><br/><span class="hl-14">                </span><span class="hl-7">// 影像数据源</span><br/><span class="hl-14">                </span><span class="hl-1">imgSource:</span><span class="hl-14"> </span><span class="hl-1">mapBoxImgSource</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 地形数据源</span><br/><span class="hl-14">                </span><span class="hl-1">demSource:</span><span class="hl-14"> </span><span class="hl-1">mapBoxDemSource</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 地图投影中央子午线经度</span><br/><span class="hl-14">                </span><span class="hl-1">lon0:</span><span class="hl-14"> </span><span class="hl-9">90</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 最小缩放级别</span><br/><span class="hl-14">                </span><span class="hl-1">minLevel:</span><span class="hl-14"> </span><span class="hl-9">2</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 最大缩放级别</span><br/><span class="hl-14">                </span><span class="hl-1">maxLevel:</span><span class="hl-14"> </span><span class="hl-9">18</span><span class="hl-14">,</span><br/><span class="hl-14">            });</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// 地图中心经纬度转为场景坐标</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">center</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">map</span><span class="hl-14">.</span><span class="hl-4">geo2pos</span><span class="hl-14">(</span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-8">THREE</span><span class="hl-14">.</span><span class="hl-4">Vector3</span><span class="hl-14">(</span><span class="hl-9">108.942</span><span class="hl-14">, </span><span class="hl-9">34.2855</span><span class="hl-14">));</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">container</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">document</span><span class="hl-14">.</span><span class="hl-4">querySelector</span><span class="hl-14">(</span><span class="hl-2">&quot;#map&quot;</span><span class="hl-14">);</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">viewer</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">plugin</span><span class="hl-14">.</span><span class="hl-4">GLViewer</span><span class="hl-14">(</span><br/><span class="hl-14">                </span><span class="hl-1">container</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-8">THREE</span><span class="hl-14">.</span><span class="hl-4">Vector3</span><span class="hl-14">(</span><span class="hl-1">center</span><span class="hl-14">.</span><span class="hl-1">x</span><span class="hl-14">, </span><span class="hl-1">center</span><span class="hl-14">.</span><span class="hl-1">y</span><span class="hl-14">, </span><span class="hl-9">0</span><span class="hl-14">),</span><br/><span class="hl-14">                </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-8">THREE</span><span class="hl-14">.</span><span class="hl-4">Vector3</span><span class="hl-14">(</span><span class="hl-1">center</span><span class="hl-14">.</span><span class="hl-1">x</span><span class="hl-14">, </span><span class="hl-1">center</span><span class="hl-14">.</span><span class="hl-1">y</span><span class="hl-14">, </span><span class="hl-9">3e4</span><span class="hl-14">),</span><br/><span class="hl-14">            );</span><br/><br/><span class="hl-14">            </span><span class="hl-1">viewer</span><span class="hl-14">.</span><span class="hl-1">scene</span><span class="hl-14">.</span><span class="hl-4">add</span><span class="hl-14">(</span><span class="hl-1">map</span><span class="hl-14">);			</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// 动画漫游到3500km高空</span><br/><span class="hl-14">            (() </span><span class="hl-5">=&gt;</span><span class="hl-14"> {</span><br/><span class="hl-14">                </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">timer</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-4">setInterval</span><span class="hl-14">(() </span><span class="hl-5">=&gt;</span><span class="hl-14"> {</span><br/><span class="hl-14">                    </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">pos</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">viewer</span><span class="hl-14">.</span><span class="hl-1">camera</span><span class="hl-14">.</span><span class="hl-1">position</span><span class="hl-14">;</span><br/><span class="hl-14">                    </span><span class="hl-1">pos</span><span class="hl-14">.</span><span class="hl-1">z</span><span class="hl-14"> </span><span class="hl-0">-=</span><span class="hl-14"> </span><span class="hl-9">500</span><span class="hl-14">;</span><br/><span class="hl-14">                    </span><span class="hl-1">pos</span><span class="hl-14">.</span><span class="hl-1">y</span><span class="hl-14"> </span><span class="hl-0">-=</span><span class="hl-14"> </span><span class="hl-9">10</span><span class="hl-14">;</span><br/><span class="hl-14">                    </span><span class="hl-6">if</span><span class="hl-14"> (</span><span class="hl-1">pos</span><span class="hl-14">.</span><span class="hl-1">z</span><span class="hl-14"> </span><span class="hl-0">&lt;</span><span class="hl-14"> </span><span class="hl-9">100</span><span class="hl-14">) {</span><br/><span class="hl-14">                        </span><span class="hl-4">clearInterval</span><span class="hl-14">(</span><span class="hl-1">timer</span><span class="hl-14">);</span><br/><span class="hl-14">                    }</span><br/><span class="hl-14">                }, </span><span class="hl-9">10</span><span class="hl-14">);</span><br/><span class="hl-14">            })();</span><br/><span class="hl-14">        </span><span class="hl-10">&lt;/</span><span class="hl-11">script</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;/</span><span class="hl-11">body</span><span class="hl-10">&gt;</span><br/><span class="hl-10">&lt;/</span><span class="hl-11">html</span><span class="hl-10">&gt;</span>
</code><button>Copy</button></pre>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:three-tile-v06"><span>three-<wbr/>tile <wbr/>V0.6</span></a><ul><li><a href="#md:1-简介"><span>1 简介</span></a></li><li><ul><li><a href="#md:11-特点"><span>1.1 特点</span></a></li><li><a href="#md:12-开发环境"><span>1.2 开发环境</span></a></li></ul></li><li><a href="#md:2-安装"><span>2 安装</span></a></li><li><ul><li><a href="#md:21-直接引用"><span>2.1 直接引用</span></a></li><li><a href="#md:22-npm"><span>2.2 npm</span></a></li></ul></li><li><a href="#md:3-使用"><span>3 使用</span></a></li><li><ul><li><a href="#md:31-初始化三维场景"><span>3.1 初始化三维场景</span></a></li><li><a href="#md:32-定义地图数据源"><span>3.2 定义地图数据源</span></a></li><li><a href="#md:32-地图创建"><span>3.2 地图创建</span></a></li></ul></li><li><a href="#md:4-约定和限制"><span>4. 约定和限制</span></a></li><li><a href="#md:5-示例"><span>5. 示例</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>three-tile</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>